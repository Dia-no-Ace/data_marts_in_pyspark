# Построение нескольких витрин идентификаторов на основе сгенерированного датасета.

Цель проекта - создание витрины, содержащей в себе идентификаторы пользователей определенного веб-сайта.

## Этапы
1) генерация файлов с синтетическими данными
2) создание витрин данных на основе сгенерированных данных

Для сборки проекта понадобится jupyter notebook и PySpark.

## Описание проекта

На наш веб-сайт заходят разные пользователи с разных устройств. Нужно получить витрину, максимально содержащую все возможные идентификаторы пользователей (ИНН, хэш, телефон, id внутри сайта, различные куки, GAID или IDFA). 
Исходные данные генерируются с помощью Python библиотек. Структура и типы этих данных идентичны источнику в реальном проекте. Сами же данные являются синтетическим примером. Подробности создания датасета содержатся в блокноте Dataset_generation.ipnb. В результате запуска данного скрипта будут сгенерированы данные за 10 дней (одна папка на один день), начиная с текущего дня. Папка будет содержать от 5 до 9 партиций в формате JSON в зависимости от дня.
Полученные данные объединены в один датасет, дедуплицированны (по id пользователя и типу устройства) и приведены к нужным типам. Некоторые поля захешированы (e-mail, имя пользователя, номер телефона). В витрине идентификаторов не имеет значение частота посещения пользователем страницы; важно зафиксировать клиента и его всевозможные устройства (куки), если он заходит с них.


## Описание исходных данных

| Название         | Описание | Комментарий | Значение |
|------------------|----------|-------------|----------|
| inn              |ИНН| - |128818888111|
| raw_cookie       | Cookies пользователя в сыром виде | Хранит ключ-значение | ```json<br>[{"key":"_sa_cookie_a","value":"SA1.e519e40f-f599-4651-b168-40eefe821bf4.1592250469"},<br>{"key":"_fa_coookie_b","value":"ads2.2020127030.1589493240"},<br>{"key":"_ym_cookie_c","value":"15894932061040605701"},<br>{"key":"_fbp","value":"fb.1.1589493214770.259895265"},<br>{"key":"org_uid","value":"1234565"},<br>{"key":"user_uid","value":"1234565"},<br>{"key":"user_phone","value":"9 777 312 11 31"},<br>{"key":"user_mail","value":"usermail@user.io"}]<br>``` |
| event_type       | Тип события | SUBMIT, REGISTER, SUBMIT_MD5 | SUBMIT |
| event_action     | Действие пользователя | pageview, event, login-check-otp | pageview |
| data_value       | Хэш значения | sha256, md5 или пусто | e519e40ff5994651b16840eefe821bf4 |
| geocountry       | Страна | - | Mongolia |
| city             | Город | - | Ulan-Batar |
| user_os          | ОС пользователя | - | Mac |
| systemlanguage   | Язык системы | RU, ENG | RU |
| geoaltitude      | Высота | - | 123,432 |
| meta_platform    | Платформа | WEB, MOBAIL | WEB |
| screensize       | Разрешение экрана | - | 1920x1080 |
| timestampcolumn  | Временная метка | - | 2023-01-01 |

На основе вышеописанных данных сначала создано несколько промежуточных витрин, а затем одна результирующая со всевозможными идентификаторами пользователя. Процесс создания витрин продемонстрирован в блокноте Data_marts.ipnb. 


